<!DOCTYPE html>
<html lang="en" data-theme="garden" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link href="../main.css" rel="stylesheet">
  <link rel="stylesheet" href="../css/partiBlock.css">
  <!-- <link rel="stylesheet" href="../css/userStyle.css"> -->
  <title>VoteApp</title>
</head>

<body class="bg-base-100">
  
    <nav class="navbar bg-primary">
      <div class="navbar-start">
        <div class="dropdown">
          <label tabindex="0" class="btn btn-ghost btn-circle">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
              stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7" />
            </svg>
          </label>
          <ul tabindex="0" class="menu menu-compact dropdown-content mt-3 p-2 shadow bg-base-100 rounded-box w-52">
            <li><a th:href="@{/user/dashboard}">Elections</a></li>
            <li><a href="/">Retour à l'accueil</a></li>
            
          </ul>
        </div>
      </div>
      <div class="navbar-center">
        <a class="btn btn-ghost normal-case text-xl">VoteApp</a>
      </div>
      <div class="navbar-end">
        <div class="form-control">
          <input type="text" placeholder="Search" class="input input-bordered" />
        </div>
        <button class="btn btn-ghost btn-circle">
          <div class="indicator">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
              stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
            </svg>
            <span class="badge badge-xs badge-primary indicator-item"></span>
          </div>
        </button>
        <div class="dropdown dropdown-end">
          <label tabindex="0" class="btn btn-ghost btn-circle avatar">
            <div class="w-10 rounded-full">
              <img src="../images/avatar.jpg" />
            </div>
          </label>
          <ul tabindex="0" class="mt-3 p-2 shadow menu menu-compact dropdown-content bg-base-100 rounded-box w-52">
            <li>
              <a class="justify-between">
                Profile
                <!-- <span class="badge">New</span> -->
              </a>
            </li>
            <!-- <li><a>Settings</a></li> -->
            <li><a th:href="@{/vote/logout}">Logout</a></li>
          </ul>
        </div>
      </div>
    </nav>
  

    <!-- <div class="main-container"> -->
        <h1 class="m-8 font-mono text-4xl text-center" th:text="${election.electionName}">Le nom de l'election</h1>
        <p class="leading-relaxed m-8" th:text="${election.description}">Lorem ipsum dolor sit, amet consectetur adipisicing elit. Pariatur atque quaerat
            quidem corrupti similique error aperiam temporibus ullam maxime veniam aspernatur est tenetur deleniti
            dignissimos voluptatem, saepe et doloremque eius odio expedita sequi eligendi. Doloribus iure tenetur iusto
            fugiat molestiae et repellat doloremque placeat perferendis maiores rem voluptates quia, alias rerum sed!
            Eum illum minima officia nobis molestias ea hic, reiciendis tempore at? Consequatur dolorem, ipsa iste
            architecto explicabo adipisci iusto labore quos voluptatibus ratione aut laborum deleniti voluptatum vel
            dignissimos rerum sapiente hic iure molesti.</p>
        <!--<div class="parti-container bg-secondary">
            <div class="parti-name">
                <h2>Nom du parti</h2>
            </div>
            <div class="parti-description">
                <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Quis temporibus atque modi aut sapiente,
                    necessitatibus numquam explicabo ex itaque aperiam. Lorem ipsum dolor sit amet, consectetur
                    adipisicing elit. Fuga, eos saepe! Beatae eaque autem nisi facilis nihil doloribus, iure corrupti
                    quisquam voluptatem. Voluptas voluptatibus eveniet sit repellendus quasi ab voluptatem debitis neque
                    velit, tenetur adipisci quaerat optio. Laborum, ratione maiores?</p>
            </div>
            <div class="section-candidats">
                <div id="1" class="card-candidat bg-primary-content">

                    <div class="card-candidat-details">
                        <p class="text-title">Card-candidat title</p>
                        <p class="text-body">Here are the details of the card-candidat Here are the details of the
                            card-candidat Here are the details of the card-candidat</p>
                    </div>
                    <button class="card-candidat-button"><a>Voter</a> </button>
                </div>
                <div id="2" class="card-candidat bg-primary-content">

                    <div class="card-candidat-details">
                        <p class="text-title">Card-candidat title</p>
                        <p class="text-body">Here are the details of the card-candidat Here are the details of the
                            card-candidat Here are the details of the card-candidat</p>
                    </div>
                    <button class="card-candidat-button"><a>Voter</a> </button>
                </div>
                <div id="3" class="card-candidat bg-primary-content">

                    <div class="card-candidat-details">
                        <p class="text-title">Card-candidat title</p>
                        <p class="text-body">Here are the details of the card-candidat Here are the details of the
                            card-candidat Here are the details of the card-candidat</p>
                    </div>
                    <button class="card-candidat-button"><a>Voter</a> </button>
                </div>
                <div id="4" class="card-candidat bg-primary-content selected">

                    <div class="card-candidat-details">
                        <p class="text-title">Card-candidat title</p>
                        <p class="text-body">Here are the details of the card-candidat Here are the details of the
                            card-candidat Here are the details of the card-candidat</p>
                    </div>
                    <button class="card-candidat-button"><a>Voter</a> </button>
                </div>
                <div id="5" class="card-candidat bg-primary-content">

                    <div class="card-candidat-details">
                        <p class="text-title">Card-candidat title</p>
                        <p class="text-body">Here are the details of the card-candidat Here are the details of the
                            card-candidat Here are the details of the card-candidat</p>
                    </div>
                    <button class="card-candidat-button"><a>Voter</a> </button>
                </div>
            </div>
        </div>-->
        
        
        <div class="section-candidats m-7">
            <div  class="card-candidat bg-primary-content" th:each="candidat : ${candidats}" th:id="${candidat.id}">
                <div class="card-candidat-details">
                    <p class="text-title" th:text="${candidat.nom} + ' '+ ${candidat.prenom}">Card-candidat title</p>
                    <p class="text-body" th:text="${candidat.description}">Here are the details of the card-candidat Here are the details of the
                        card-candidadivt Here are the details of the card-candidat</p>
                </div>
                <button class="card-candidat-button"><a>Voter</a> </button>
            </div>
            
        </div>
        <div>
        	<form th:action="@{/user/save/vote}" method="post" th:object="${code}" id="form" style="display: none;">
        		<input type="text" th:field="*{id}" name="id" id="id">
        	</form>
        </div>
        <div class="text-center my-6">
            <button class="btn btn-primary" id="valid">Valider mon vote </button>
        </div>
    <!-- </div> -->
    <footer class="footer p-10 bg-primary text-base-content">
        <!-- <div>
          <span class="footer-title">Services</span>
          <a class="link link-hover">Branding</a>
          <a class="link link-hover">Design</a>
          <a class="link link-hover">Marketing</a>
          <a class="link link-hover">Advertisement</a>
        </div> -->
        <div>
          <span class="footer-title">Company</span>
          <a class="link link-hover">About us</a>
          <a class="link link-hover">Contact</a>
          <!-- <a class="link link-hover">Jobs</a>
          <a class="link link-hover">Press kit</a> -->
        </div>
        <div>
          <span class="footer-title">Legal</span>
          <a class="link link-hover">Terms of use</a>
          <a class="link link-hover">Privacy policy</a>
          <!-- <a class="link link-hover">Cookie policy</a> -->
        </div>
        <div>
          <span class="footer-title">Newsletter</span>
          <div class="form-control w-80">
            <label class="label">
              <span class="label-text">Enter your email address</span>
            </label>
            <div class="relative">
              <input type="text" placeholder="username@site.com" class="input input-bordered w-full pr-16" />
              <button class="btn btn-secondary absolute top-0 right-0 rounded-l-none">Subscribe</button>
            </div>
          </div>
        </div>
      </footer>
	<script type="text/javascript" src="/js/jquery.min.js"></script>
    <script>
        // pour le cas ou on peut faire plusieurs vote, maxSelect est le nombre maximal qu'on veut
        let voteButtons = document.querySelectorAll(".card-candidat-button");
        let cardCandidats = document.querySelectorAll('.card-candidat');
        var maxSelect = 1;
        var selected = 0;
        for (let i = 0; i < voteButtons.length; i++) {
            voteButtons[i].addEventListener('click', function () {
                if (voteButtons[i].classList.contains('button-selected')) {
                    voteButtons[i].classList.remove('button-selected');
                    voteButtons[i].style.transform = "translate(-50%, 50%)!important";
                    voteButtons[i].style.opacity = "1!important";
                    voteButtons[i].innerHTML = "<a>Voter</a>";
                    cardCandidats[i].classList.remove('card-selected');
                    selected--;
                } else if (selected < maxSelect) {
                    voteButtons[i].classList.add('button-selected');
                    cardCandidats[i].classList.add('card-selected');
                    voteButtons[i].innerHTML = "<a>Sélectionné</a>";
                    let choosed = document.querySelectorAll(".card-selected");
                    document.getElementById('id').value = choosed[0].id;
                    
                    selected++;
                } else {
                    alert("Vous ne pouvez faire que " + maxSelect + " choix à la fois.");
                }
            })
        }

        // votes contient les id des candidats selectionnés
        let choosed = document.querySelectorAll(".card-selected");
        votes = [];
        for (let i = 0; i < choosed.length; i++) {
            votes.append(choosed[i].id);
        }
        
		document.getElementById("valid").addEventListener('click', function() {
			document.getElementById("form").submit();
		})

    </script>

</body>
</html>